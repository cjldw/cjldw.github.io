---
title: é¡¹ç›®å¼•ç”¨ç¬¬ä¸‰æ–¹åŒ…çš„å°å‘
date: 2017-06-21 21:19:26
desc:  composerä½¿ç”¨ç¬¬ä¸‰æ–¹é‡åˆ°çš„ä¸€ä¸ªå°å‘
tags: git, submodule, composer
---


ä¸€èˆ¬æˆ‘ä»¬å¼€å‘é¡¹ç›®, ä¸å¯é¿å…çš„éœ€è¦ä½¿ç”¨åˆ«çš„ç¬¬ä¸‰æ–¹åº“, javaæœ‰`maven`, pythonæœ‰`pip`, goæœ‰`go get`, javascritpæœ‰`npm`,
å½“ç„¶ä½œä¸ºä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€PHPæœ‰`composer`, çœ‹ä¸Šå»æ˜¯é‚£ä¹ˆçš„ç¾å¥½.ğŸ˜„. ä»Šå¤©ç”¨composerå®‰è£…è‡ªå·±å†™çš„ä¸€ä¸ªä¾èµ–, å‘ç°æœ‰å‘.
..........

<!-- more -->

### å†™åœ¨å‰é¢çš„è¯

åœºæ™¯, æœ‰å¿«ä¸šåŠ¡ä»£ç , å¾ˆå¤šå¾ˆå¤šä¸ªé¡¹ç›®éƒ½è¦è°ƒç”¨, (æ¯”å¦‚ä¸šåŠ¡ç›‘æ§ä»£ç , éœ€è¦åœ¨ä¸ªä¸ªä¸šåŠ¡ä¸­è°ƒç”¨), ç†æ‰€å½“çš„æƒ³æŠŠå®ƒå°è£…æˆä¸€ä¸ªcomposeråŒ…(é’ˆå¯¹phpå¼€å‘)
ç„¶åå…¶ä»–é¡¹ç›®åªè¦`composer require monitorpkg`å³å¯, ç„¶åå°†ä»£ç åŠ å…¥åˆ°ä»“åº“, å’Œé¡¹ç›®ä¸€èµ·å‘å¸ƒOKäº†, 
(ä¸€èˆ¬æˆ‘ä»¬éƒ½æŠŠ`vendor`ç›®å½•ä¸‹ä¸€èµ·åŠ å…¥åˆ°ä»“åº“. 1. æ–¹ä¾¿å‰ç«¯åŒå­¦ ä¸€èµ·å¼€å‘, æ€»ä¸èƒ½è®©å‰ç«¯åŒå­¦ä¸€å®‰è£…composerå§.  2. çº¿ä¸Šå‘å¸ƒä¹Ÿç®€å•, å½“ç„¶ä½ å¯ä»¥è¯´å‘å¸ƒåæŒ‚ä¸ªé’©å­, `composer update`ä¸€ä¸‹ä¹Ÿå¾ˆç®€å•, ä½†å®é™…æƒ…å†µä¸ä¼šç†æƒ³, æ›¾ç»æˆ‘ä»¬é¡¹ç›®å°±æ˜¯è¿™æ ·åš, å‘ç°æ¯æ¬¡å‘å¸ƒé¡¹ç›®è¦ç­‰å¥½å‡ åˆ†é’Ÿ, éšç€é¡¹ç›®å˜å¤§, 10å¤šåˆ†é’Ÿæ‰å‘å¸ƒOK, è¿™ç»å¯¹ä¸æ˜¯ä½ æƒ³è¦çš„)
é—®é¢˜æ¥äº†, æˆ‘å‘ç°`composer install monitorpkg`çš„ä»£ç ä¸èƒ½åŠ å…¥åˆ°é¡¹ç›®ä»“åº“. ~~~

### åŸå› è¿½è¸ª

`composer install`ä¸‹æ¥çš„ç¬¬ä¸‰æ–¹åŒ…ä¸èƒ½åŠ å…¥ä»“åº“, æ²¡é“ç†, ä»¥å‰ä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„å‘€, cdåˆ°å®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…ç›®å½•ä¸‹(`vendor/organization/monitorpkg`) `ls -a` å‘ç°.gitç›®å½•ä¹Ÿ
downä¸‹æ¥äº†? ä¸ºä»€ä¹ˆ?

### [composerä»“åº“ç±»å‹](https://getcomposer.org/doc/05-repositories.md)

composer ä»“åº“åœ°å€æœ‰ç±»å‹æœ‰4ç±»åˆ«

- Composer
- VCS
- PEAR
- Packages

ä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨çš„çš„`composer`ç±»å‹, å®‰è£…çš„åŒ…ä¸ä¼šæœ‰.gitç›®å½•, ä½†é¡¹ç›®æ˜¯ç§æœ‰é¡¹ç›®, å›¾ä¸ªæ–¹ä¾¿, ç›´æ¥ä½¿ç”¨`vcs`ç±»å‹äº†, å‘ç°ä½¿ç”¨`vcs`ç±»å‹ä¼šæŠŠé¡¹ç›®çš„.gitç›®å½•ä¹Ÿdownä¸‹æ¥
æˆ‘ä»¬çŸ¥é“, å•ä¸ªé¡¹ç›®gitä»“åº“ä¸­åªèƒ½æœ‰.gitç›®å½•, ç”±äºcomposerå®‰è£…çš„ç¬¬ä¸‰æ–¹åŒ…ä¹Ÿæœ‰.gitç›®å½•, å› æ­¤é¡¹ç›®ç›´æ¥å¿½ç•¥äº†ç¬¬ä¸‰æ–¹åŒ…äº†.

composer.json æ–‡ä»¶å¦‚ä¸‹

```json
{
    "name": "luowen/test",
    "authors": [
        {
            "name": "luowen",
            "email": "bigpao.luo@gmail.com"
        }
    ],
    "repositories": [
        {
            "type": "vcs",
            "url": "https://github.com/vvotm/zqim.git"
        }
    ],
    "require": {
        "luowen/zqphplib": "dev-master"
    }
}

```

### æ€ä¹ˆè§£å†³å‘¢, åŠæ³•è‚¯å®šæ˜¯æœ‰çš„.

1. ä½¿ç”¨`git submodule`å®ç°

    æ·»åŠ æˆ‘ä»¬å†™çš„ç¬¬ä¸‰æ–¹åŒ…çš„gitåœ°å€ä½œä¸ºé¡¹ç›®çš„å­æ¨¡å—å¯å‚è€ƒ[gitsubmodule documention][2], [Working with submodules][1]

    ```bash
        $ cd vendor/organiztion/
        $ git submodule add https://my-privite-gitrepo.com/mycustomer-package.git monitorypkg
    ```
    è¿˜æ²¡å®Œäº‹, æ¯æ¬¡å‘å¸ƒé¡¹ç›®å éœ€è¦æ‰§è¡Œ `git submodule update --init --recursive` æŠŠå­æ¨¡å—çš„é¡¹ç›®ä»£ç æ‹‰å»ä¸‹æ¥
    å¾ˆæ˜¾ç„¶, è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„

2. ä½¿ç”¨[Composerå®˜æ–¹Satis](https://github.com/composer/satis) æ­å»ºç§æœ‰composerä»“åº“, å°†composer repositios æ¢æˆ `composer`ç±»å‹, ä¾‹å­:

    ```json
    {
        "name": "luowen/test",
        "authors": [
            {
                "name": "luowen",
                "email": "bigpao.luo@gmail.com"
            }
        ],
        "repositories": [
            {
                "type": "composer",
                "url": "http://youpackage.domain.com"
            }
        ],
        "require": {
            "luowen/zqphplib": "dev-master"
        }
    }
    ```


**å…³äºæ›´å¤šçš„gitsubmoduleä¾‹å­(æ‹†åˆ†é¡¹ç›®æˆå¤šä¸ªå­æ¨¡å—, ç­‰ç­‰..)å‚è€ƒ[gitsubmodule][2], [Working with submodules][1]**
**ç»¼åˆè€ƒè™‘å°½é‡é¿å…ä½¿ç”¨gitsubmoduleè¿™ä¸ªåŠŸèƒ½, æˆæœ¬æ¯”è¾ƒé«˜, å¹¶æ²¡æƒ³çš„é‚£ä¹ˆç¾å¥½**

[1]: https://github.com/blog/2104-working-with-submodules
[2]: https://git-scm.com/docs/git-submodule

**æ¬¢è¿æ‹ç –, æˆ‘çš„disqusæ’ä»¶è¢«å¼ºäº†, ä¸€èˆ¬äººæ‹ä¸äº†!ğŸ˜„ğŸ˜„ğŸ˜„**
