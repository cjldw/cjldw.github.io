<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> apache2.4åå‘ä»£ç†é…ç½® Â· luowen&weiwei-(luowen â¤ï¸ wwei)</title><meta name="description" content="apache2.4åå‘ä»£ç†å®ç°"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><!--if theme.googlefonts//link(rel="stylesheet", href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type='text/css')--><!--else //link(rel="stylesheet", href="https://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type='text/css')--><meta name="generator" content="Hexo 6.3.0"></head><body><div class="wrap"><header><a class="logo-link" href="/"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link" href="/" target="_self">BLOG</a></li><li class="nav-list-item"><a class="nav-list-link" href="/archives/" target="_self">ARCHIVE</a></li><li class="nav-list-item"><a class="nav-list-link" href="http://weibo.com/loovien" target="_blank">WEIBO</a></li><li class="nav-list-item"><a class="nav-list-link" href="https://github.com/loovien" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link" href="/me/" target="_self">ABOUTME</a></li><li class="nav-list-item"><a class="nav-list-link" href="/atom.xml" target="_self">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">apache2.4åå‘ä»£ç†é…ç½®</h1><div class="post-info">Jun 1, 2017</div><div class="post-content"><p>ä»Šå¤©æ˜¯å„¿ç«¥èŠ‚, æ„¿å¤©ä¸‹æ‰€æœ‰çš„å®å®éƒ½å¥åº·å¿«ä¹çš„æˆé•¿(æˆ‘ä¹Ÿæ˜¯å®å®ğŸ˜„)â€¦.</p>
<p>å›åˆ°æ­£é¢˜: å‡è®¾ä½ æœ‰å¤šä¸ªç½‘ç«™, ä½†åªæœ‰ä¸€ä¸ªåŸŸå, å¦‚ä½•å®ç°è®¿é—®2ä¸ªå¯¹åº”ç½‘ç«™. 1, é€šè¿‡æ–¹å‘ä»£ç†å®ç°äº†.</p>
<span id="more"></span>

<h2 id="åœºæ™¯å†ç°"><a href="#åœºæ™¯å†ç°" class="headerlink" title="åœºæ™¯å†ç°"></a>åœºæ™¯å†ç°</h2><ol>
<li><p>è¯ä¸å¤šè¯´, ä¸Šä¸€å¼ å›¾, å¿«é€Ÿç†è§£</p>
<p> <img src="/images/httproxy/reverse_proxy.png" alt="http reverse proxy"></p>
</li>
</ol>
<ol start="2">
<li><p>é€šè¿‡è®¿é—®å¯¹åº”çš„è·¯å¾„, httpä»£ç†è¿‡å»</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Site: http://youdomain.com</span><br><span class="line">WebSite1: http://youdomain.com/app1 http://localhost/app1</span><br><span class="line">WebSite2: http://youdomain.com/app2 http://localhost/app2</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="apache2-4é…ç½®"><a href="#apache2-4é…ç½®" class="headerlink" title="apache2.4é…ç½®"></a>apache2.4é…ç½®</h2><ol start="0">
<li><p> å¼€å¯<code>mod_proxy</code> <code>mod_proxy_http.so</code></p>
</li>
<li><p>ç¼–è¾‘<code>http-vhost.conf</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ProxyPreserveHost On</span><br><span class="line">ProxyPass /app1 http://127.0.0.1:8888/app1</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="nginx1-xé…ç½®"><a href="#nginx1-xé…ç½®" class="headerlink" title="nginx1.xé…ç½®"></a>nginx1.xé…ç½®</h2><ol>
<li><p>ç¼–è¾‘<code>nginx.conf</code> æˆ–å¯¹åº”vhost.confæ–‡ä»¶</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /app1 &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8888</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="åˆ›å»º8888ç«¯å£ç›‘å¬httpæœåŠ¡"><a href="#åˆ›å»º8888ç«¯å£ç›‘å¬httpæœåŠ¡" class="headerlink" title="åˆ›å»º8888ç«¯å£ç›‘å¬httpæœåŠ¡"></a>åˆ›å»º8888ç«¯å£ç›‘å¬httpæœåŠ¡</h2><ol>
<li><p>ç”¨golangå¿«é€Ÿæ­å»º, ä¹Ÿå¯ä»¥ä½¿ç”¨nodejs, éƒ½å¾ˆæ–¹ä¾¿</p>
 <figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">UserInfo</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">    fmt.Fprintf(w, <span class="string">&quot;Hello, I love, %s&quot;</span>, r.URL.Path[<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    http.HandleFunc(<span class="string">&quot;/app1/hello&quot;</span>, UserInfo)</span><br><span class="line">    http.ListenAndServe(<span class="string">&quot;:8888&quot;</span>, <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><ol>
<li>é€šè¿‡è®¿é—®â€™<a target="_blank" rel="noopener" href="http://youdomain.com/app1/hello&#39;">http://youdomain.com/app1/hello&#39;</a>, ä¼šå¯¹åº”è¿”å› Hello I love /app1/hello</li>
</ol>
<h2 id="fastcgiä»£ç†-æ‚è°ˆ"><a href="#fastcgiä»£ç†-æ‚è°ˆ" class="headerlink" title="fastcgiä»£ç†(æ‚è°ˆ)"></a>fastcgiä»£ç†(æ‚è°ˆ)</h2><h3 id="apache-fastcgi-php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€"><a href="#apache-fastcgi-php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€" class="headerlink" title="apache fastcgi+php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€"></a>apache fastcgi+php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€</h3><ol>
<li><p>è¿™ä¸ªæ¨¡å¼å¾ˆå°‘ç”¨, apacheä¸‹ä½¿ç”¨php, ç¼–è¯‘phpæ—¶å€™, æŒ‡å®š<code>--with-apxs2</code> ç›´æ¥ç¼–è¯‘mod_php5æ¨¡å—.æ€§èƒ½, é…ç½®å„æ–¹é¢éƒ½æ–¹ä¾¿.<br>å°½ä½œäº†è§£å§</p>
</li>
<li><p>é…ç½®, ç¡®ä¿<code>mod_proxy.so</code>, <code>mod_proxy_fcgi.so</code>æ¨¡å—å·²ç»åŠ è½½, document_rootæ³¨æ„cgiå˜é‡</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ProxyPassMatch <span class="string">&quot;^/app1/.*\.php(/.*)?$&quot;</span> <span class="string">&quot;fcgi://localhost:9000/d:/workspace/&quot;</span> enablereuse=on</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="nginx-fastcgiä»£ç†php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€"><a href="#nginx-fastcgiä»£ç†php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€" class="headerlink" title="nginx fastcgiä»£ç†php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€"></a>nginx fastcgiä»£ç†php-fpmå¤„ç†phpè„šæœ¬è¯­è¨€</h3><ol>
<li><p>nginxæ²¡æœ‰æ¨¡å—å¤„ç†php, åªèƒ½é€šè¿‡php-fpmæˆ–php-cgi.exeå¤„ç†phpè„šæœ¬æ–‡ä»¶</p>
</li>
<li><p>åŸºæœ¬é…ç½®ä¿¡æ¯</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  $document_root<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>httpä»£ç†å’Œfastcgiä»£ç†æ˜¯2ä¸ªå®Œå…¨ä¸åŒçš„æœºåˆ¶, æ³¨æ„åŒºåˆ†</strong><br><strong>æ¬¢è¿æ‹ç –ğŸ˜„</strong></p>
</div></article></div></section><footer><div class="paginator"><a class="prev" href="/2017/06/03/golang%E6%A8%A1%E6%8B%9F%E6%8E%A5%E5%8A%9B%E8%B5%9B/">PREV</a><a class="next" href="/2017/05/14/centos7%E7%BC%96%E8%AF%91apache2-4-php5-6-mysql5-7/">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'superwm';
var disqus_identifier = '2017/06/01/apache-reverse-proxy/';
var disqus_title = 'apache2.4åå‘ä»£ç†é…ç½®';
var disqus_url = 'https://loovien.github.io/2017/06/01/apache-reverse-proxy/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>Â© 2015 - 2023 <a href="https://loovien.github.io">luowen<loovien@163.com></a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script async src="/js/embed.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-78479444-1",'auto');ga('send','pageview');</script></body></html>