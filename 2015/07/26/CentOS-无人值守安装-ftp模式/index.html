<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> CentOS 无人值守安装(ftp模式) · vvotm</title><meta name="description" content="CentOS 无人值守安装(ftp模式) - vvotm(luowen)"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/loovien" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/vvotm" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/me/" target="_self" class="nav-list-link">ABOUTME</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">CentOS 无人值守安装(ftp模式)</h1><div class="post-info">Jul 26, 2015</div><div class="post-content"><p>写好一个脚本, 让centos自己完全自动安装, 就这么干!</p>
<a id="more"></a>
<h2 id="每次安装CentOS时候-都需要鼠标勾选配置-一台机器安装还可以接受-如果有多台-就不好了-下面就介绍下CentOS-ftp形式无人值守安装"><a href="#每次安装CentOS时候-都需要鼠标勾选配置-一台机器安装还可以接受-如果有多台-就不好了-下面就介绍下CentOS-ftp形式无人值守安装" class="headerlink" title="每次安装CentOS时候,都需要鼠标勾选配置.一台机器安装还可以接受,如果有多台,就不好了,下面就介绍下CentOS ftp形式无人值守安装"></a><span style="font-size: 14px; line-height: 1.5;">每次安装CentOS时候,都需要鼠标勾选配置.一台机器安装还可以接受,如果有多台,就不好了,下面就介绍下CentOS ftp形式无人值守安装</span></h2><ul>
<li><p>测试环境</p>
<ul>
<li><p>2台机器</p>
</li>
<li><p>机器1: ip 192.168.1.103/24 跑了vsftpd服务,并且共享了/var/ftp, 目录内容</p>
<ol>
<li>ks.cfg CentOS kickstart配置文件[就是安装的配置文件, 每次安装系统后,都会生成 /root/anaconda-ks.cfg]</li>
<li>pub/CentOS/* CentOS光盘中所有内容的复制[理论是可以挂在的, 但实验挂在不行,读取不到文件]</li>
</ol>
</li>
<li><p>机器2 只需要放入CentOS的光盘, 启动后按键盘ESC, 输入命令 linux ks=ftp://192.168.1.103/ks.cfg 即可完成</p>
</li>
</ul>
</li>
<li><p>ks.cfg配置文件详解</p>
  <div class="cnblogs_code"><br>  <pre># Kickstart <span style="color: #0000ff;">file</span><span style="color: #000000;"> automatically generated by anaconda.<br><br>  #version</span>=<span style="color: #000000;">DEVEL<br>  </span><span style="color: #0000ff;">install</span><span style="color: #000000;"><br>  url </span>–url=<span style="color: #0000ff;">ftp</span>:<span style="color: #008000;">//</span><span style="color: #008000;">192.168.1.103/pub/CentOS # 配置安装树目录 本文已ftp方式</span><br>  lang en_US.UTF-<span style="color: #800080;">8</span><span style="color: #000000;"><br>  keyboard us<br>  network </span>–onboot no –device eth0 –mtu=<span style="color: #800080;">1500</span> –bootproto dhcp –<span style="color: #000000;">noipv6 # dhcp方式获取ip<br>  rootpw  </span>–iscrypted $<span style="color: #800080;">6</span><span style="color: #000000;">$RyFEkouZJLufDNGf$POLwfvq2CHW2BY1qVGFzX6HoX1CsRGvaifo03Zec0uRQnupT.el3fg50b4I3pQRRMFZJqPdW8BypTe0shmZYi.<br>  # Reboot after installation<br>  reboot<br>  firewall </span>–service=<span style="color: #0000ff;">ssh</span><span style="color: #000000;"><br>  authconfig </span>–enableshadow –passalgo=<span style="color: #000000;">sha512<br>  selinux </span>–<span style="color: #000000;">enforcing<br>  timezone </span>–utc Asia/<span style="color: #000000;">Shanghai # 默认时区<br>  bootloader </span>–location=mbr –driveorder=sda –append=<span style="color: #800000;">“</span><span style="color: #800000;">crashkernel=auto rhgb rhgb quiet quiet</span><span style="color: #800000;">“</span><span style="color: #000000;"><br>  # The following is the partition information you requested<br>  # Note that any partitions you deleted are not expressed<br>  # here so unless you </span><span style="color: #0000ff;">clear</span><span style="color: #000000;"> all partitions first, this is<br>  # not guaranteed to work<br>  clearpart </span>–all –drives=<span style="color: #000000;">sda # 删除磁盘<br><br>  part </span>/boot –fstype=ext4 –size=<span style="color: #800080;">500</span><span style="color: #000000;"> # 分boot分区<br>  part </span>/ –fstype=ext4 –size=<span style="color: #800080;">5000</span><span style="color: #000000;"> # 分根分区<br>  part swap </span>–grow –maxsize=<span style="color: #800080;">1024</span> –size=<span style="color: #800080;">1024</span> # 分swap分区 可以使用 <code>part swap --&lt;span style=&quot;color: #000000;&quot;&gt;recommended</code> 推荐<br><br>  repo –name=<span style="color: #800000;">“</span><span style="color: #800000;">CentOS</span><span style="color: #800000;">“</span>  –baseurl=<span style="color: #0000ff;">ftp</span>:<span style="color: #008000;">//</span><span style="color: #008000;">192.168.1.103/pub/CentOS –cost=1000 # 镜像源,包含所有的软件包</span><br><br>  %packages –<span style="color: #000000;">nobase<br>  @Core # 核心包, 可以自己添加多个<br><br>  </span>%<span style="color: #000000;">end<br><br>  </span>%<span style="color: #000000;">post<br>  </span><span style="color: #0000ff;">yum</span> <span style="color: #0000ff;">install</span> -<span style="color: #000000;">y vim # 安装后自动执行脚本 可根据自己定义编写<br>  </span>%end</pre><br>  </div>

</li>
</ul>
<p>配置参数很多,只列出了一点详细可参考官方网站<a href="http://www.centos.org/docs/5/html/Installation_Guide-en-US/s1-kickstart2-options.html" target="_blank" rel="external">centos kickstart</a>&nbsp;也可一用软件自动生成ks.cfg文件,搜索软件包&nbsp;<code>yum search kickstart</code>&nbsp;出来两个 pykickstart|system-config-kickstart 安装即可</p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/07/26/redis数据迁移/" class="prev">PREV</a><a href="/2015/07/25/CentOS-Debian等Linux发行版更新镜像源-1/" class="next">NEXT</a></div><div data-thread-key="2015/07/26/CentOS-无人值守安装-ftp模式/" data-title="CentOS 无人值守安装(ftp模式)" data-url="http://vvotm.github.io/2015/07/26/CentOS-无人值守安装-ftp模式/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"superwm"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><div class="copyright"><p>© 2015 - 2016 <a href="http://vvotm.github.io">vvotm(luowen)</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-78479444-1",'auto');ga('send','pageview');</script></body></html>