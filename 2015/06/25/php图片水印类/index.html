<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> php图片水印类 · vvotm</title><meta name="description" content="php图片水印类 - vvotm(luowen)"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/loovien" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/vvotm" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/me/" target="_self" class="nav-list-link">ABOUTME</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">php图片水印类</h1><div class="post-info">Jun 25, 2015</div><div class="post-content"><p>php中图片水印处理类</p>
<a id="more"></a>
<div class="cnblogs_code"><br><pre>&lt;?<span style="color: #000000;">php<br></span><span style="color: #0000ff;">class</span><span style="color: #000000;"> Image {<br>    </span><span style="color: #0000ff;">private</span> <span style="color: #800080;">$path</span><span style="color: #000000;">;<br>    </span><span style="color: #008000;">//</span><span style="color: #008000;">构造方法用来对图片所在位置进行初使化</span><br>    <span style="color: #0000ff;">function</span> _<em>construct(<span style="color: #800080;">$path</span>=”./“<span style="color: #000000;">){<br>        </span><span style="color: #800080;">$this</span>-&gt;path=<span style="color: #008080;">rtrim</span>(<span style="color: #800080;">$path</span>, “/“).”/“<span style="color: #000000;">;<br>        </span><span style="color: #800080;">$this</span> -&gt; path = ‘’<span style="color: #000000;">;<br>    }<br>    </span><span style="color: #008000;">/<em></em></span><span style="color: #008000;"> 对图片进行缩放
     </span></em><br>     <em> 参数$name: 是需要处理的图片名称
     </em> 参数$width:是缩放后的宽度<br>     <em> 参数$height:是缩放后的高度
     </em> 参数$qz: 是新图片的名称前缀<br>     <em> 返回值:就是缩放后的图片名称，失败则返回false
     </em><br>     <span style="color: #008000;">*/</span><br>    <span style="color: #0000ff;">function</span> thumb(<span style="color: #800080;">$name</span>, <span style="color: #800080;">$width</span>, <span style="color: #800080;">$height</span>, <span style="color: #800080;">$qz</span>=”th“<span style="color: #000000;">){<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">获取图片信息</span><br>        <span style="color: #800080;">$imgInfo</span>=<span style="color: #800080;">$this</span>-&gt;getInfo(<span style="color: #800080;">$name</span>); <span style="color: #008000;">//</span><span style="color: #008000;">图片的宽度，高度，类型<br>        //获取图片资源, 各种类型的图片都可以创建资源 jpg, gif, png</span><br>        <span style="color: #800080;">$srcImg</span>=<span style="color: #800080;">$this</span>-&gt;getImg(<span style="color: #800080;">$name</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">);<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">获取计算图片等比例之后的大小, $size[“width”], $size[“height”]</span><br>        <span style="color: #800080;">$size</span>=<span style="color: #800080;">$this</span>-&gt;getNewSize(<span style="color: #800080;">$name</span>, <span style="color: #800080;">$width</span>, <span style="color: #800080;">$height</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">);<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">获取新的图片资源, 处理一下gif透明背景</span><br>        <span style="color: #800080;">$newImg</span>=<span style="color: #800080;">$this</span>-&gt;kidOfImage(<span style="color: #800080;">$srcImg</span>, <span style="color: #800080;">$size</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">);<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">另存为一个新的图片，返回新的缩放后的图片名称    </span><br>        <span style="color: #0000ff;">return</span> <span style="color: #800080;">$this</span>-&gt;createNewImage(<span style="color: #800080;">$newImg</span>, <span style="color: #800080;">$qz</span>.<span style="color: #800080;">$name</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">);<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> createNewImage(<span style="color: #800080;">$newImg</span>, <span style="color: #800080;">$newName</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">){<br>        </span><span style="color: #0000ff;">switch</span>(<span style="color: #800080;">$imgInfo</span>[“type”<span style="color: #000000;">]){<br>        </span><span style="color: #0000ff;">case</span> 1:<span style="color: #008000;">//</span><span style="color: #008000;">gif</span><br>            <span style="color: #008080;">Header</span>(“Content-type: image/gif”<span style="color: #000000;">);<br>            </span><span style="color: #800080;">$result</span>=imageGif(<span style="color: #800080;">$newImg</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 2:<span style="color: #008000;">//</span><span style="color: #008000;">jpg</span><br>            <span style="color: #008080;">Header</span>(“Content-type: image/jpg”<span style="color: #000000;">);<br>            </span><span style="color: #800080;">$result</span>=imageJPEG(<span style="color: #800080;">$newImg</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 3:<span style="color: #008000;">//</span><span style="color: #008000;">png</span><br>            <span style="color: #008080;">Header</span>(“Content-type: image/png”<span style="color: #000000;">);<br>            </span><span style="color: #800080;">$return</span>=imagepng(<span style="color: #800080;">$newImg</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        }<br>        imagedestroy(</span><span style="color: #800080;">$newImg</span><span style="color: #000000;">);<br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$newName</span><span style="color: #000000;">;<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> kidOfImage(<span style="color: #800080;">$srcImg</span>, <span style="color: #800080;">$size</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">){<br>        </span><span style="color: #800080;">$newImg</span>=imagecreatetruecolor(<span style="color: #800080;">$size</span>[“width”], <span style="color: #800080;">$size</span>[“height”<span style="color: #000000;">]);<br><br>        </span><span style="color: #800080;">$otsc</span>=imagecolortransparent(<span style="color: #800080;">$srcImg</span><span style="color: #000000;">);<br><br>        </span><span style="color: #0000ff;">if</span>(<span style="color: #800080;">$otsc</span> &gt;=0 &amp;&amp; <span style="color: #800080;">$otsc</span> &lt;= imagecolorstotal(<span style="color: #800080;">$srcImg</span><span style="color: #000000;">)){<br>            </span><span style="color: #800080;">$tran</span>=imagecolorsforindex(<span style="color: #800080;">$srcImg</span>, <span style="color: #800080;">$otsc</span><span style="color: #000000;">);<br><br>            </span><span style="color: #800080;">$newt</span>=imagecolorallocate(<span style="color: #800080;">$newImg</span>, <span style="color: #800080;">$tran</span>[“red”], <span style="color: #800080;">$tran</span>[“green”], <span style="color: #800080;">$tran</span>[“blue”<span style="color: #000000;">]);<br><br>            imagefill(</span><span style="color: #800080;">$newImg</span>, 0, 0, <span style="color: #800080;">$newt</span><span style="color: #000000;">);<br><br>            imagecolortransparent(</span><span style="color: #800080;">$newImg</span>, <span style="color: #800080;">$newt</span><span style="color: #000000;">);<br>        }<br><br>        imagecopyresized(</span><span style="color: #800080;">$newImg</span>, <span style="color: #800080;">$srcImg</span>, 0, 0, 0, 0, <span style="color: #800080;">$size</span>[“width”], <span style="color: #800080;">$size</span>[“height”], <span style="color: #800080;">$imgInfo</span>[“width”], <span style="color: #800080;">$imgInfo</span>[“height”<span style="color: #000000;">]);<br><br>        imagedestroy(</span><span style="color: #800080;">$srcImg</span><span style="color: #000000;">);<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$newImg</span><span style="color: #000000;">;<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> getNewSize(<span style="color: #800080;">$name</span>, <span style="color: #800080;">$width</span>, <span style="color: #800080;">$height</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">){<br>        </span><span style="color: #800080;">$size</span>[“width”]=<span style="color: #800080;">$imgInfo</span>[“width”<span style="color: #000000;">];<br>        </span><span style="color: #800080;">$size</span>[“height”]=<span style="color: #800080;">$imgInfo</span>[“height”<span style="color: #000000;">];<br><br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">缩放的宽度如果比原图小才重新设置宽度</span><br>        <span style="color: #0000ff;">if</span>(<span style="color: #800080;">$width</span> &lt; <span style="color: #800080;">$imgInfo</span>[“width”<span style="color: #000000;">]){<br>            </span><span style="color: #800080;">$size</span>[“width”]=<span style="color: #800080;">$width</span><span style="color: #000000;">;<br>        }<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">缩放的高度如果比原图小才重新设置高度</span><br>        <span style="color: #0000ff;">if</span>(<span style="color: #800080;">$height</span> &lt; <span style="color: #800080;">$imgInfo</span>[“height”<span style="color: #000000;">]){<br>            </span><span style="color: #800080;">$size</span>[“height”]=<span style="color: #800080;">$height</span><span style="color: #000000;">;<br>        }<br><br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">图片等比例缩放的算法</span><br>        <span style="color: #0000ff;">if</span>(<span style="color: #800080;">$imgInfo</span>[“width”]<em><span style="color: #800080;">$size</span>[“width”] &gt; <span style="color: #800080;">$imgInfo</span>[“height”] </em> <span style="color: #800080;">$size</span>[“height”<span style="color: #000000;">]){<br>            </span><span style="color: #800080;">$size</span>[“height”]=<span style="color: #008080;">round</span>(<span style="color: #800080;">$imgInfo</span>[“height”]<em><span style="color: #800080;">$size</span>[“width”]/<span style="color: #800080;">$imgInfo</span>[“width”<span style="color: #000000;">]);<br>        }</span><span style="color: #0000ff;">else</span><span style="color: #000000;">{<br>            </span><span style="color: #800080;">$size</span>[“width”]=<span style="color: #008080;">round</span>(<span style="color: #800080;">$imgInfo</span>[“width”]</em><span style="color: #800080;">$size</span>[“height”]/<span style="color: #800080;">$imgInfo</span>[“height”<span style="color: #000000;">]);<br>        }<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$size</span><span style="color: #000000;">;<br><br>    }<br><br>    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">function</span> getInfo(<span style="color: #800080;">$name</span><span style="color: #000000;">){<br>        </span><span style="color: #800080;">$data</span>=<span style="color: #008080;">getImageSize</span>(<span style="color: #800080;">$this</span>-&gt;path.<span style="color: #800080;">$name</span><span style="color: #000000;">);<br><br>        </span><span style="color: #800080;">$imageInfo</span>[“width”]=<span style="color: #800080;">$data</span>[0<span style="color: #000000;">];<br>        </span><span style="color: #800080;">$imageInfo</span>[“height”]=<span style="color: #800080;">$data</span>[1<span style="color: #000000;">];<br>        </span><span style="color: #800080;">$imageInfo</span>[“type”]=<span style="color: #800080;">$data</span>[2<span style="color: #000000;">];<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$imageInfo</span><span style="color: #000000;">;<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> getImg(<span style="color: #800080;">$name</span>, <span style="color: #800080;">$imgInfo</span><span style="color: #000000;">){<br>        </span><span style="color: #800080;">$srcPic</span>=<span style="color: #800080;">$this</span>-&gt;path.<span style="color: #800080;">$name</span><span style="color: #000000;">;<br><br>        </span><span style="color: #0000ff;">switch</span>(<span style="color: #800080;">$imgInfo</span>[“type”<span style="color: #000000;">]){<br>        </span><span style="color: #0000ff;">case</span> 1: <span style="color: #008000;">//</span><span style="color: #008000;">gif</span><br>            <span style="color: #800080;">$img</span>=imagecreatefromgif(<span style="color: #800080;">$srcPic</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 2: <span style="color: #008000;">//</span><span style="color: #008000;">jpg</span><br>            <span style="color: #800080;">$img</span>=imageCreatefromjpeg(<span style="color: #800080;">$srcPic</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 3: <span style="color: #008000;">//</span><span style="color: #008000;">png</span><br>            <span style="color: #800080;">$img</span>=imageCreatefrompng(<span style="color: #800080;">$srcPic</span><span style="color: #000000;">);<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">default</span>:<br>            <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br><br>        }<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$img</span><span style="color: #000000;">;<br>    }<br>    </span><span style="color: #008000;">/<em></em></span><span style="color: #008000;"> 功能：为图片加水印图片
      参数$groundName: 背景图片，即需要加水印的图片<br>     <em> 参数$waterName: 水钱图片
     </em> 参数#aterPost：水印位置， 10种状态，<br>     <em>  0为随机位置
     </em><br>     <em>  1. 为顶端居左  2. 为顶端居中  3 为顶端居右
     </em>  4  为中部居左  5. 为中部居中  6 为中部居右<br>     <em>  7 . 为底端居左 8. 为底端居中， 9. 为底端居右
     </em><br>     <em> 参数$qz : 是加水印后的图片名称前缀
     </em> 返回值：就是处理后图片的名称<br>     <em><br>     </em></span><span style="color: #008000;">/</span><br>    <span style="color: #0000ff;">function</span> waterMark(<span style="color: #800080;">$groundName</span>, <span style="color: #800080;">$waterName</span>, <span style="color: #800080;">$waterPos</span>=0, <span style="color: #800080;">$qz</span>=”wa_”<span style="color: #000000;">){<br><br>        </span><span style="color: #800080;">$groundInfo</span>=<span style="color: #800080;">$this</span>-&gt;getInfo(<span style="color: #800080;">$groundName</span><span style="color: #000000;">);<br>        </span><span style="color: #800080;">$waterInfo</span>=<span style="color: #800080;">$this</span>-&gt;getInfo(<span style="color: #800080;">$waterName</span><span style="color: #000000;">);<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">水印的位置</span><br>        <span style="color: #0000ff;">if</span>(!<span style="color: #800080;">$pos</span>=<span style="color: #800080;">$this</span>-&gt;position(<span style="color: #800080;">$groundInfo</span>, <span style="color: #800080;">$waterInfo</span>, <span style="color: #800080;">$waterPos</span><span style="color: #000000;">)){<br>            </span><span style="color: #0000ff;">return</span> “Picture too small!”<span style="color: #000000;">;<br>        }<br><br>        </span><span style="color: #800080;">$groundImg</span>=<span style="color: #800080;">$this</span>-&gt;getImg(<span style="color: #800080;">$groundName</span>, <span style="color: #800080;">$groundInfo</span><span style="color: #000000;">);<br>        </span><span style="color: #800080;">$waterImg</span>=<span style="color: #800080;">$this</span>-&gt;getImg(<span style="color: #800080;">$waterName</span>, <span style="color: #800080;">$waterInfo</span><span style="color: #000000;">);<br><br>        </span><span style="color: #800080;">$groundImg</span>=<span style="color: #800080;">$this</span>-&gt;copyImage(<span style="color: #800080;">$groundImg</span>, <span style="color: #800080;">$waterImg</span>, <span style="color: #800080;">$pos</span>, <span style="color: #800080;">$waterInfo</span><span style="color: #000000;">);<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$this</span>-&gt;createNewImage(<span style="color: #800080;">$groundImg</span>, <span style="color: #800080;">$qz</span>.<span style="color: #800080;">$groundName</span>, <span style="color: #800080;">$groundInfo</span><span style="color: #000000;">);<br><br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> copyImage(<span style="color: #800080;">$groundImg</span>, <span style="color: #800080;">$waterImg</span>, <span style="color: #800080;">$pos</span>, <span style="color: #800080;">$waterInfo</span><span style="color: #000000;">){<br>        imagecopy(</span><span style="color: #800080;">$groundImg</span>, <span style="color: #800080;">$waterImg</span>, <span style="color: #800080;">$pos</span>[“posX”], <span style="color: #800080;">$pos</span>[“posY”], 0, 0, <span style="color: #800080;">$waterInfo</span>[“width”], <span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">]);<br>        imagedestroy(</span><span style="color: #800080;">$waterImg</span><span style="color: #000000;">);<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #800080;">$groundImg</span><span style="color: #000000;">;<br>    }<br><br>    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">function</span> position(<span style="color: #800080;">$groundInfo</span>, <span style="color: #800080;">$waterInfo</span>, <span style="color: #800080;">$waterPos</span><span style="color: #000000;">){<br>        </span><span style="color: #008000;">//</span><span style="color: #008000;">需要背景比水印图片大</span><br>        <span style="color: #0000ff;">if</span>((<span style="color: #800080;">$groundInfo</span>[“width”]&lt; <span style="color: #800080;">$waterInfo</span>[“width”]) ||(<span style="color: #800080;">$groundInfo</span>[“height”] &lt; <span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">])){<br>            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;<br>        }<br><br>        </span><span style="color: #0000ff;">switch</span>(<span style="color: #800080;">$waterPos</span><span style="color: #000000;">){<br>        </span><span style="color: #0000ff;">case</span> 1:<br>            <span style="color: #800080;">$posX</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 2:<br>            <span style="color: #800080;">$posX</span>=(<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”])/2<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 3:<br>            <span style="color: #800080;">$posX</span>=<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”<span style="color: #000000;">];<br>            </span><span style="color: #800080;">$posY</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 4:<br>            <span style="color: #800080;">$posX</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=(<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”]) /2<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 5:<br>            <span style="color: #800080;">$posX</span>=(<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”])/2<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=(<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”]) /2<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 6:<br>            <span style="color: #800080;">$posX</span>=<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”<span style="color: #000000;">];<br>            </span><span style="color: #800080;">$posY</span>=(<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”]) /2<span style="color: #000000;">;<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 7:<br>            <span style="color: #800080;">$posX</span>=0<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">];<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 8:<br>            <span style="color: #800080;">$posX</span>=(<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”])/2<span style="color: #000000;">;<br>            </span><span style="color: #800080;">$posY</span>=<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">];<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 9:<br>            <span style="color: #800080;">$posX</span>=<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”<span style="color: #000000;">];<br>            </span><span style="color: #800080;">$posY</span>=<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">];<br>            </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        </span><span style="color: #0000ff;">case</span> 0:<br>        <span style="color: #0000ff;">default</span>:<br>        <span style="color: #800080;">$posX</span>=<span style="color: #008080;">rand</span>(0, (<span style="color: #800080;">$groundInfo</span>[“width”]-<span style="color: #800080;">$waterInfo</span>[“width”<span style="color: #000000;">]));<br>        </span><span style="color: #800080;">$posY</span>=<span style="color: #008080;">rand</span>(0, (<span style="color: #800080;">$groundInfo</span>[“height”]-<span style="color: #800080;">$waterInfo</span>[“height”<span style="color: #000000;">]));<br>        </span><span style="color: #0000ff;">break</span><span style="color: #000000;">;<br>        }<br><br>        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">array</span>(“posX”=&gt;<span style="color: #800080;">$posX</span>, “posY”=&gt;<span style="color: #800080;">$posY</span><span style="color: #000000;">);<br>    }<br><br>}</span></pre><br></div>

</div></article></div></section><footer><div class="paginator"><a href="/2015/06/30/linux下nginx-php-fpm运行用户以及资源目录的权限/" class="prev">PREV</a></div><div data-thread-key="2015/06/25/php图片水印类/" data-title="php图片水印类" data-url="http://vvotm.github.io/2015/06/25/php图片水印类/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"superwm"};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><div class="copyright"><p>© 2015 - 2016 <a href="http://vvotm.github.io">vvotm(luowen)</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-78479444-1",'auto');ga('send','pageview');</script></body></html>